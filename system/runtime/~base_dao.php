<?php
 define('FETCH_OBJ', 'FETCH_OBJ'); define('FETCH_ASSOC', 'FETCH_ASSOC'); define('FETCH_NUM', 'FETCH_NUM'); class Base_DAO { public $query_result = array(); public $last_insert_id; public function __construct(array $config = NULL) {} public function prepare($query, array $params = NULL) {} public function exec_query($query) {} public function now() {} public function get_var($query, $x = 0, $y = 0) { $return_val = ''; if ($query) { $this->exec_query($query); } if ($this->query_result !== array()) { if ($y >= count($this->query_result)) { halt('A System Error Was Encountered', 'The offset y you specified overflows', 'sys_error'); } $values = array_values(get_object_vars($this->query_result[$y])); if ($x >= count($values)) { halt('A System Error Was Encountered', 'The offset x you specified overflows', 'sys_error'); } if ($values[$x] !== '') { $return_val = $values[$x]; } } return $return_val; } public function get_row($query, $output = FETCH_OBJ, $y = 0) { $return_val = NULL; $this->exec_query($query); if ($this->query_result !== array()) { if ($y >= count($this->query_result)) { halt('A System Error Was Encountered', 'The offset y you specified overflows', 'sys_error'); } if ($output == FETCH_OBJ) { $return_val = $this->query_result[$y]; } elseif ($output == FETCH_ASSOC) { $return_val = get_object_vars($this->query_result[$y]); } elseif ($output == FETCH_NUM) { $return_val = array_values(get_object_vars($this->query_result[$y])); } else { halt('A System Error Was Encountered', " \$db->get_row(string query, output type, int offset) -- Output type must be one of: FETCH_OBJ, FETCH_ASSOC, FETCH_NUM", 'sys_error'); } } return $return_val; } public function get_col($query, $x = 0) { $return_val = array(); $this->exec_query($query); $cnt = count($this->query_result); for ($i = 0; $i < $cnt; $i++) { $return_val[$i] = $this->get_var(NULL, $x, $i); } return $return_val; } public function get_results($query, $output = FETCH_OBJ) { $return_val = NULL; $this->exec_query($query); if ($output == FETCH_OBJ) { $return_val = $this->query_result; } elseif ($output == FETCH_ASSOC || $output == FETCH_NUM) { if ($this->query_result) { $i = 0; foreach($this->query_result as $row) { $new_array[$i] = get_object_vars($row); if ($output == FETCH_NUM) { $new_array[$i] = array_values($new_array[$i]); } $i++; } $return_val = $new_array; } } return $return_val; } public function trans_begin() {} public function trans_commit() {} public function trans_rollback() {} } 